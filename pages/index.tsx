import type { NextPage } from 'next';
import Head from 'next/head';
import { useEffect, useState } from 'react';
import ResortsList from '../components/ResortsList';
import InfoPageLayout from '../layouts/InfoPageLayout';
import { getAllResortNames } from '../services/resortsService';
import styles from '../styles/Home.module.css';

const Home: NextPage = () => {
  const [resorts, setResorts] = useState<string[] | null>(null);

  useEffect(() => {
    const getResorts = async () => {
      try {
        const response = await getAllResortNames();
        console.log(response);

        setResorts(response);
      } catch (e) {
        console.log(e);
      }
    };
    getResorts();
  }, []);

  return (
    <div>
      <Head>
        <title>On The Snow Clone</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <InfoPageLayout>
        <ResortsList resorts={resorts} />
      </InfoPageLayout>
    </div>
  );
};

export default Home;
